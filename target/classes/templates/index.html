<!DOCTYPE html>
<html lang="en" class="has-aside-left has-aside-mobile-transition has-navbar-fixed-top has-aside-expanded">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin One HTML - Bulma Admin Dashboard</title>

  <!-- Bulma is included -->
  <link rel="stylesheet" href="css/main.css">

  <!-- Fonts -->
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet" type="text/css">
  
  
</head>
<body>
<div id="app">

  <!-- 顶栏 top navbar -->
  <nav id="navbar-main" class="navbar is-fixed-top">

    <!-- 顶栏主体 top navbar major -->
    <div class="navbar-brand">
      <a class="navbar-item is-hidden-desktop jb-aside-mobile-toggle">
        <span class="icon"><i class="mdi mdi-forwardburger mdi-24px"></i></span>
      </a>

      <!-- 顶栏搜索框 top navbar search -->
      <div class="navbar-item has-control">
        <div class="control"><input placeholder="Search everywhere..." class="input"></div>
      </div>
    </div>

    <!-- 顶栏菜单栏 top navbar menu， 信息栏展开模式下隐藏 -->
    <div class="navbar-brand is-right">
      <a class="navbar-item is-hidden-desktop jb-navbar-menu-toggle" data-target="navbar-menu">
        <span class="icon"><i class="mdi mdi-dots-vertical"></i></span>
      </a>
    </div>

    <!-- 顶栏信息栏 top information -->
    <div class="navbar-menu fadeIn animated faster" id="navbar-menu">
      <div class="navbar-end">

        <!-- 顶栏信息栏菜单栏 top information menu  停用-->
        <!--
        <div class="navbar-item has-dropdown has-dropdown-with-icons has-divider is-hoverable">
          <a class="navbar-link is-arrowless">
            <span class="icon"><i class="mdi mdi-menu"></i></span>
            <span>Sample Menu</span>
            <span class="icon">
            <i class="mdi mdi-chevron-down"></i>
          </span>
          </a>
          <div class="navbar-dropdown">
            <a href="profile.html" class="navbar-item">
              <span class="icon"><i class="mdi mdi-account"></i></span>
              <span>My Profile</span>
            </a>
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-settings"></i></span>
              <span>Settings</span>
            </a>
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-email"></i></span>
              <span>Messages</span>
            </a>
            <hr class="navbar-divider">
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-logout"></i></span>
              <span>Log Out</span>
            </a>
          </div>
        </div>
        -->

        <!-- 账号信息栏 account information -->
        <div class="navbar-item has-dropdown has-dropdown-with-icons has-divider has-user-avatar is-hoverable">
          
          <!-- 账号栏本体 account bar -->
          <a class="navbar-link is-arrowless">
            <div class="is-user-avatar">
              <img src="https://avatars.dicebear.com/v2/initials/john-doe.svg" alt="John Doe">
            </div>

            <!-- 账号栏用户名 account bar user name -->
            <div class="is-user-name"><span>Nardo</span></div>
            <span class="icon"><i class="mdi mdi-chevron-down"></i></span>
          </a>

          <!-- 账号栏下拉菜单 account bar dropdown menu -->
          <div class="navbar-dropdown">
            <a href="profile.html" class="navbar-item">
              <span class="icon"><i class="mdi mdi-account"></i></span>
              <span>My Profile</span>
            </a>
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-settings"></i></span>
              <span>Settings</span>
            </a>
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-email"></i></span>
              <span>Messages</span>
            </a>
            <hr class="navbar-divider">
            <a class="navbar-item">
              <span class="icon"><i class="mdi mdi-logout"></i></span>
              <span>Log Out</span>
            </a>
          </div>
        </div>

        <!-- 帮助图标 help icon -->
        <a href="https://justboil.me/bulma-admin-template/free-html-dashboard/" title="About" class="navbar-item has-divider is-desktop-icon-only">
          <span class="icon"><i class="mdi mdi-help-circle-outline"></i></span>
          <span>About</span>
        </a>

        <!-- 退出图标 log out icon -->
        <a title="Log out" class="navbar-item is-desktop-icon-only">
          <span class="icon"><i class="mdi mdi-logout"></i></span>
          <span>Log out</span>
        </a>
      </div>
    </div>
  </nav>


  <!-- 侧栏 aside bar -->
  <aside class="aside is-placed-left is-expanded">
    <div class="aside-tools">

      <!-- 侧栏标题 aside title -->
      <div class="aside-tools-label">
        <span><b>Milestone</b> On HTML</span>
      </div>
    </div>
    <div class="menu is-menu-main">

      <!-- 侧栏General-->
      <p class="menu-label">General</p>
      <ul class="menu-list">
        <li>
          <a href="index.html" class="is-active router-link-active has-icon">
            <span class="icon"><i class="mdi mdi-desktop-mac"></i></span>
            <span class="menu-item-label">Dashboard</span>
          </a>
        </li>
      </ul>

      <!-- 侧栏Examples-->
      <p class="menu-label">Examples</p>
      <ul class="menu-list">
        <li>
          <a href="tables.html" class="has-icon">
            <span class="icon has-update-mark"><i class="mdi mdi-table"></i></span>
            <span class="menu-item-label">Tables</span>
          </a>
        </li>
        <li>
          <a href="forms.html" class="has-icon">
            <span class="icon"><i class="mdi mdi-square-edit-outline"></i></span>
            <span class="menu-item-label">Forms</span>
          </a>
        </li>
        <li>
          <a href="profile.html" class="has-icon">
            <span class="icon"><i class="mdi mdi-account-circle"></i></span>
            <span class="menu-item-label">Profile</span>
          </a>
        </li>
        <li>
          <a class="has-icon has-dropdown-icon">
            <span class="icon"><i class="mdi mdi-view-list"></i></span>
            <span class="menu-item-label">Submenus</span>
            <div class="dropdown-icon">
              <span class="icon"><i class="mdi mdi-plus"></i></span>
            </div>
          </a>
          <ul>
            <li>
              <a href="#void">
                <span>Sub-item One</span>
              </a>
            </li>
            <li>
              <a href="#void">
                <span>Sub-item Two</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- 侧栏时间-->
      <div class="menu is-menu-main">
        <p class="menu-label">Time and Weather</p>
        <div id="time-date-weather">
          <p id="time-date"></p>
          <p id="weather"></p>
        </div>
      </div>
      

    </div>
  </aside>

  <!-- 标题栏 title bar  -->
  <section class="section is-title-bar">
    <div class="level">
      <div class="level-left">
        <div class="level-item">
          <ul>
            <li>Nardo</li>
            <li>Dashboard</li>
          </ul>
        </div>
      </div>

      <!--
      <div class="level-right">
        <div class="level-item">
          <div class="buttons is-right">
            <a href="https://github.com/vikdiesel/admin-one-bulma-dashboard" target="_blank" class="button is-primary">
              <span class="icon"><i class="mdi mdi-github-circle"></i></span>
              <span>GitHub</span>
            </a>
          </div>
        </div>
      </div>
      -->
    </div>
  </section>

  <!-- 主要内容 main content -->
  <section class="section is-main-section">

    <!-- 关键指标栏 key metrics -->
    <div class="tile is-ancestor">

      <!-- 指标1 metrics1-->
      <div class="tile is-parent">
        <div class="card tile is-child">
          <div class="card-content">
            <div class="level is-mobile">
              <div class="level-item">

                <!-- 指标1内容 metrics1 content -->
                <div class="is-widget-label"><h3 class="subtitle is-spaced">
                  Today Cargo
                </h3>
                  <h1 class="title">
                    512
                  </h1>
                </div>
              </div>
              <div class="level-item has-widget-icon">
                <div class="is-widget-icon"><span class="icon has-text-primary is-large"><i
                    class="mdi mdi-cart-outline mdi-48px"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 指标2 metrics2-->
      <div class="tile is-parent">
        <div class="card tile is-child">
          <div class="card-content">
            <div class="level is-mobile">
              <div class="level-item">

                <!-- 指标2内容 metrics2 content -->
                <div class="is-widget-label"><h3 class="subtitle is-spaced">
                  Work Load
                </h3>
                  <h1 class="title">
                    90%
                  </h1>
                </div>
              </div>
              <div class="level-item has-widget-icon">
                <div class="is-widget-icon"><span class="icon has-text-info is-large"><i
                    class="mdi mdi-account-multiple mdi-48px"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 指标3 metrics3-->
      <div class="tile is-parent">
        <div class="card tile is-child">
          <div class="card-content">
            <div class="level is-mobile">
              <div class="level-item">

                <!-- 指标3内容 metrics3 content -->
                <div class="is-widget-label"><h3 class="subtitle is-spaced">
                  Ontime rate
                </h3>
                  <h1 class="title">
                    98%
                  </h1>
                </div>
              </div>
              <div class="level-item has-widget-icon">
                <div class="is-widget-icon"><span class="icon has-text-success is-large"><i
                    class="mdi mdi-finance mdi-48px"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 指标4 metrics4-->
      <div class="tile is-parent">
        <div class="card tile is-child">
          <div class="card-content">
            <div class="level is-mobile">
              <div class="level-item">

                <!-- 指标4内容 metrics4 content -->
                <div class="is-widget-label"><h3 class="subtitle is-spaced">
                  Delay AWBs
                </h3>
                  <h1 class="title" style="color: red;">
                    1
                  </h1>
                </div>
              </div>
              <div class="level-item has-widget-icon">
                <div class="is-widget-icon"><span class="icon has-text-danger is-large"><i
                    class="mdi mdi-alert mdi-48px"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- 图栏 graph area -->
    <div class="card">

      <!-- 图栏标题 graph area title -->
      <header class="card-header">
        <p class="card-header-title">
          <span class="icon"><i class="mdi mdi-finance"></i></span>
          Performance
        </p>
        <a href="#" class="card-header-icon">
          <span class="icon"><i class="mdi mdi-reload"></i></span>
        </a>
      </header>

      <!-- 图栏内容 graph area content -->
      <div class="card-content">
        <div class="chart-area">
          <div style="height: 100%;">
            <div class="chartjs-size-monitor">
              <div class="chartjs-size-monitor-expand">
                <div></div>
              </div>
              <div class="chartjs-size-monitor-shrink">
                <div></div>
              </div>
            </div>
            <canvas id="big-line-chart" width="2992" height="1000" class="chartjs-render-monitor" style="display: block; height: 400px; width: 1197px;"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- 表格栏 table area -->
    <div class="card has-table has-mobile-sort-spaced">

      <!-- 表格栏标题 table area title -->
      <header class="card-header">
        <p class="card-header-title">
          <span class="icon"><i class="mdi mdi-account-multiple"></i></span>
          Flights
        </p>
        <a href="#" class="card-header-icon">
          <span class="icon"><i class="mdi mdi-reload"></i></span>
        </a>
      </header>

      <!-- 表格栏主体 table area body -->
      <div class="card-content">
        <div class="b-table has-pagination">
          <div class="table-wrapper has-mobile-cards">
            <table class="table is-fullwidth is-striped is-hoverable is-sortable is-fullwidth">
              
              <!-- 表格标题 table title -->
              <thead>
              <tr>
                <th style="width: 5%;"></th>
                <th style="width: 13%;">FLT_NUM</th>
                <th style="width: 13%;">LEG_ARR</th>
                <th style="width: 17%;">SCH_DEP_TIME</th>
                <th style="width: 25%;">Progress</th>
                <th style="width: 17%;">ACT_DEP_TIME</th>
                <th style="width: 10%;"></th>
              </tr>
              </thead>

              <input type="hidden" th:value="${flights.size()}" id="flightsSize">

              <!-- 表格内容 table content -->
              <tbody>
                <!-- 使用 th:each 从数据库动态生成行 -->
                <div th:each="flight, stat : ${flights}">
                  <tr>
                    <td class="is-image-cell">
                      <div class="image">
                        <img src="https://avatars.dicebear.com/v2/initials/rebecca-bauch.svg" class="is-rounded">
                      </div>
                    </td>

                    <td data-label="FLT_NUM" th:text="${flight.fltNum}"></td>
                    <td data-label="LEG_ARR" th:text="${flight.legArr}"></td>
                    <td data-label="SCH_DEP_TIME" th:text="${flight.schDepTime}"></td>
                    <td data-label="Progress" class="is-progress-cell">
                      <div style="display: flex; align-items: center; vertical-align: middle;">
                        <progress max="100" class="progress is-small is-primary" th:value="${flight.processPercent}*100" style="margin-right: 20px;"></progress>
                        <span th:text="${flight.processPercent}*100 + '%'"></span>
                      </div>
                    </td>
                    <td data-label="ACT_DEP_TIME" th:text="${flight.actDepTime}"></td>
                    <td class="is-actions-cell">
                      <div class="buttons is-right">
                        <button class="button is-small is-primary" type="button" th:id="'eye' + ${stat.index}">
                          <span class="icon"><i class="mdi mdi-eye"></i></span>
                        </button>
                      </div>
                    </td>
                    
                  </tr>
                  <tr th:id="'dropdown-table' + ${stat.index}" style="display: none;">
                    <td colspan="7">
                      <table>
                        <tr>
                          <td th:text="awbIntimeRate"></td> <!-- 步骤的名称 -->
                          <td th:text="${flight.awbIntimeRate}*100"></td> <!-- 步骤的完成情况 -->
                        </tr>
                        <tr>
                          <td th:text="uldIntimeRate"></td> <!-- 步骤的名称 -->
                          <td th:text="${flight.uldIntime100Rate}*100"></td> <!-- 步骤的完成情况 -->
                        </tr>
                        <tr>
                          <td th:text="handoverIntimeRate"></td> <!-- 步骤的名称 -->
                          <td th:text="${flight.handoverIntime100Rate}*100"></td> <!-- 步骤的完成情况 -->
                        </tr>
                        <tr>
                          <td th:text="loadsheetIntimeRate"></td> <!-- 步骤的名称 -->
                          <td th:text="${flight.loadsheetIntimeRate}*100"></td> <!-- 步骤的完成情况 -->
                        </tr>
                      </table>
                    </td>
                  </tr>
                </div>
                
              </tbody>      
            </table>
          </div>

          <div class="notification">
            <div class="level">
              <div class="level-left">
                <div class="level-item">
                  <div class="buttons has-addons">
                    <button type="button" class="button is-active">1</button>
                    <button type="button" class="button">2</button>
                    <button type="button" class="button">3</button>
                  </div>
                </div>
              </div>
              <div class="level-right">
                <div class="level-item">
                  <small>Page 1 of 3</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 底栏 footer bar -->
  <footer class="footer">
    <div class="container-fluid">
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            © 2024, Nardokong
          </div>
          
        </div>
        
      </div>
    </div>
  </footer>
</div>

<div id="sample-modal" class="modal">
  <div class="modal-background jb-modal-close"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Confirm action</p>
      <button class="delete jb-modal-close" aria-label="close"></button>
    </header>
    <section class="modal-card-body">
      <p>This will permanently delete <b>Some Object</b></p>
      <p>This is sample modal</p>
    </section>
    <footer class="modal-card-foot">
      <button class="button jb-modal-close">Cancel</button>
      <button class="button is-danger jb-modal-close">Delete</button>
    </footer>
  </div>
  <button class="modal-close is-large jb-modal-close" aria-label="close"></button>
</div>

<!-- Scripts below are for demo only -->
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
<script type="text/javascript" src="js/chart.sample.js"></script>

<!-- Icons below are for demo only. Feel free to use any icon pack. Docs: https://bulma.io/documentation/elements/icon/ -->
<link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.9.95/css/materialdesignicons.min.css">

<script>
  // 为每个图标添加点击事件监听器
  var flights = document.getElementById('flightsSize').value;
  for (var i = 0; i < flights; i++) {
    addEventListenerToIcon(i);
  }
  function addEventListenerToIcon(index) {
    var icon = document.getElementById('eye' + index);
    var dropdownRow = document.getElementById('dropdown-table' + index);

    icon.addEventListener('click', function() {
      if (dropdownRow.style.display === 'none') {
        dropdownRow.style.display = 'table-row';
      } else {
        dropdownRow.style.display = 'none';
      }
    });
  }

  // 更新时间
  function updateTime() {
    var now = new Date();
    var time = now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds();
    var date = now.getFullYear() + "-" + (now.getMonth() + 1) + "-" + now.getDate();
    document.getElementById('time-date').textContent = "Time: " + time + " Date: " + date;
  }
  
  // 更新天气
  function updateWeather() {
    // 获取天气信息
    fetch('http://api.openweathermap.org/data/2.5/weather?q=Hong%20Kong&appid=a44b91fec352869067b6cc26a0169d81')
      .then(response => response.json())
      .then(data => {
        var weather = data.weather[0].description;
        document.getElementById('weather').textContent = "Weather: " + weather;
      });
  }
  
  // 每秒更新一次时间
  setInterval(updateTime, 1000);
  
  // 每5分钟更新一次天气
  setInterval(updateWeather, 5 * 60 * 1000);
  
  // 页面加载时立即更新一次天气
  updateWeather();
</script>

</body>
</html>
